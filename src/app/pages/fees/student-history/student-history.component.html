
<app-layout>

    <div class="container p-5">
        <div class="py-2 ">
          <form [formGroup]="reportForm">
            <div class="row mt-3">
              <div class="mb-3 col-md-4">
                <label class="form-label">Class <span class="error">*</span></label>
             
                <select class="form-select" formControlName="studentClass" (change)="onChangeClass($event)">
                  <option disabled value="select">Select</option>
                  <option *ngFor="let sec of classes" [value]="sec._id">{{sec.className}}</option>
                </select>
                <div *ngIf="reportForm.controls['studentClass'].invalid && (reportForm.controls['studentClass'].dirty || reportForm.controls['studentClass'].touched)"
                class="error mt-2">
                <div *ngIf="reportForm.controls['studentClass'].errors['required']">
                  Class is required.
                </div>
              </div></div>
        
              <div class="mb-3 col-md-4">
                <label class="form-label">Section <span class="error">*</span></label>
              
                <select class="form-select" formControlName="section">
                  <option disabled value="select">Select</option>
                  <option *ngFor="let sec of sections" [value]="sec._id">{{sec.name}}</option>
                </select>
                <div *ngIf="reportForm.controls['section'].invalid && (reportForm.controls['section'].dirty || reportForm.controls['section'].touched)"
                class="error mt-2">
                <div *ngIf="reportForm.controls['section'].errors['required']">
                  Section is required.
                </div>
              </div>
              </div>
              <div class="mb-3 col-md-4">
                <label class="form-label">Year <span class="error">*</span></label>
                <select class="form-select" formControlName="academicYear">
                  <option disabled value="select">Select</option>
                  <option *ngFor="let year of aceYear" [value]="year._id">{{year.name}}</option>
                </select>
                <div *ngIf="reportForm.controls['academicYear'].invalid && (reportForm.controls['academicYear'].dirty || reportForm.controls['academicYear'].touched)"
                class="error mt-2">
                <div *ngIf="reportForm.controls['academicYear'].errors['required']">
                  Year is required.
                </div></div>
              </div>
            </div>
           
          <div class="text-end mb-5">
            <button class="btn" (click)="callReport(reportForm)"  [disabled]="!reportForm.valid">Filter</button>
          </div>
        </form>


        </div>

<div class="tab-container">
    <div class="pt-4 header-txt">
    <p class="table-heading "><b>Student History Class Wise</b></p>
    </div>
<table class="table mt-3">
<thead>
<tr>
  <th scope="col">Student Name</th>
  <th scope="col">Class</th>
  <th scope="col">Section</th>
  <th scope="col">Registration</th>
  <th scope="col">Mobile No.</th>
  <th scope="col"> Action </th>


</tr>
</thead>
<tbody>

  <ng-container *ngFor="let student of studentData; let i = index">
    <tr>
    <td>{{student.firstName + " " + student.lastName}}</td>         
    <td>{{student.class}}</td>
    <td>{{student.section}}</td>
    <td>{{student.registerNo}}</td>
    <td>{{student.number}}</td>
    <td>
      <button class="btn emp-edit me-1" title="Print Invoice" (click)="viewFeeReport(student)"><i class="fa-regular fa-circle-right"></i></button>
    </td>
  </tr>
  </ng-container>

</tbody>
</table>
</div>

   
        
      
    </div>
</app-layout>