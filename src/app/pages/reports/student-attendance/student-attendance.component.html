<app-layout>
  <div class="container-fluid p-4">

      <div class="row mb-3">
          <div class="col-md-12 header-txt">
              <i _ngcontent-dan-c162="" class="fas fa-user-check"></i>&nbsp;&nbsp;<span>Student Attendance</span>
          </div>
      </div>
      <div class="row">
          <form [formGroup]="reportForm">
              <div class="row mt-3 grey-border">
                <div class="mb-3 col-md-4">
                  <label class="form-label">Class <span class="error">*</span></label>
               
                  <select class="form-select" formControlName="studentClass" (change)="onChangeClass($event)">
                    <option disabled value="select">Select</option>
                    <option *ngFor="let sec of classes" [value]="sec._id">{{sec?.classNumeric}} ({{sec?.sections[0]?.name}}) {{sec.className}}</option>
                  </select>
                  <div *ngIf="reportForm.controls['studentClass'].invalid && (reportForm.controls['studentClass'].dirty || reportForm.controls['studentClass'].touched)"
                  class="error mt-2">
                  <div *ngIf="reportForm.controls['studentClass'].errors['required']">
                    Class is required.
                  </div>
                </div></div>  
                  <div class="col-md-4 mt-3 pt-2">
                      <mat-form-field>
                        <mat-label>Enter a date range</mat-label>
                        <mat-date-range-input [rangePicker]="picker">
                          <input matStartDate placeholder="Start date" formControlName="startDate">
                          <input matEndDate placeholder="End date" formControlName="endDate">
                        </mat-date-range-input>
                        <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
                        <mat-date-range-picker #picker></mat-date-range-picker>
                      </mat-form-field>
                    </div> 
                    <div class="col-md-3 mt-4">
                      <button class="btn mt-2" (click)="callReport(reportForm)"  [disabled]="!reportForm.valid">Filter</button>
                    </div>
              </div>
          </form>
      </div>
      <div class="row mt-3">
          <div class="col-md-12">
            <table class="table mt-3">
              <thead>
                  <tr>
                   <th>SL</th>
                   <th>Student Name</th>
                    <th>Full Day </th>
                    <th>Half Day</th>      
                    <th>Absent</th>      
                  </tr>
                </thead>
                <tbody>
                  <tr>
                      <td>1</td> 
                      <td>xyz </td>
                      <td>22 days</td>            
                      <td>01 days</td>
                      <td>03 days </td>
                    </tr>
                    <tr>
                      <td>1</td> 
                      <td>abc </td>
                      <td>20 days</td>            
                      <td>05 days</td>
                      <td>05 days </td>
                    </tr>
                  <ng-container *ngFor="let castRow of studentData; let i = index">
                    <tr>
                      <td>{{i+1}}</td> 
                      <td>{{castRow?.caste}}</td>
                      <td>{{castRow?.studentClass?.className}}</td>            
                      <td>{{castRow?.section?.name}}</td>
                      <td>{{castRow?.total}}</td>
                    </tr>
                    </ng-container>              
                </tbody>
            </table>
          </div>
      </div>
  </div>
</app-layout>