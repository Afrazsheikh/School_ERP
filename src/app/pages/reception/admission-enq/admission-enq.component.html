<app-layout>
  <div class="container p-4">
    <div class="tab-container">
      <mat-tab-group mat-stretch-tabs="false" mat-align-tabs="start">
        <mat-tab label="Enquiry List">
          <div class="pt-4 ms-2">
            <!-- <table class="table mt-3">
              <thead>
                <tr>
                  <th scope="col">SL</th>
                  <th scope="col">Name</th>
                  <th scope="col">Mobile No.</th>
                  <th scope="col">Guardian</th>
                  <th scope="col">Assigned</th>
                  <th scope="col"> Date of Birth</th>
                  <th scope="col">Response</th>
                  <th scope="col">Action</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let enq of enquiries; index as i">
                  <td>{{i+1}}</td>
                  <td>{{enq.name}}</td>
                  <td>{{enq.mobileNo
                  }}</td>
                  <td><b>Father:</b> {{enq.fatherName}}<br/> <b>Mother:</b> {{enq.motherName}}</td>
                  <td>{{enq.assigned}}</td>
                  <td>{{enq.dob}}</td>
                  <td>{{enq.response}}</td>
                  <td>
                    <button class="btn emp-edit me-1" data-bs-toggle="modal" data-bs-target="#editPrompt"
                    (click)="setEnq(enq)">
                    <i class="fa-solid fa-pencil"></i>
                  </button>
                  <button class="btn emp-edit ms-1" data-bs-toggle="modal" data-bs-target="#deletePrompt"
                    (click)="selectedEnq=enq;">
                    <i class="fa-solid fa-trash-can"></i>
                  </button>
                  </td>
                </tr>
              </tbody>
            </table> -->
            <app-dynamic-table [data]="enquiries" [columns]="tableHeader" (rowEvent)="rowEvent($event)"></app-dynamic-table>
          </div>
        </mat-tab>
        <mat-tab label="Add Enquiry">
          <form [formGroup]="addEnquiryForm" (ngSubmit)="addDEnquery()">
          <div class="row mt-3 ms-1">
            <div class="col-md-4">
              <label class="form-label">Name <span class="error">*</span></label>
              <input type="text" formControlName="name" class="form-control">
            </div>

            <div class="col-md-4">
              <label class="form-label">Gender <span class="error">*</span></label>
              <input type="text" formControlName="gender" class="form-control">
            </div>

            <div class="col-md-4">
              <label class="form-label">Date Of Birth <span class="error">*</span></label>       
            <div class="input-group flex-nowrap">
            
              <input type="text" class="date-picker-input" [matDatepicker]="picker1"
                (click)="picker1.open()" formControlName="dob">
            </div>
            <mat-datepicker #picker1></mat-datepicker>
  
            </div>
            </div>

            <div class="row mt-3 ms-1">
              <div class="col-4">
                <label class="form-label">Father Name <span class="error">*</span></label>
                <input type="text" formControlName="fatherName" class="form-control">
              </div>
              <div class="col-4">
                <label class="form-label">Mother Name <span class="error">*</span></label>
                <input type="text" formControlName="motherName" class="form-control">
              </div>
              <div class="col-4">
                <label class="form-label">Mobile No. <span class="error">*</span></label>
                <input type="number" formControlName="mobileNo" class="form-control">
              </div>
             
            </div>

          <div class="row mt-3 ms-1">
            <div class="col-4 ">
              <label class="form-label">E-mail <span class="error">*</span></label>
              <input type="text" formControlName="email" class="form-control">
            </div>
            <div class="col-4">
              <label class="form-label">Assigned <span class="error">*</span></label>
              <input type="text" formControlName="assigned" class="form-control">

          </div>
          <div class="col-4">
            <label class="form-label">Response <span class="error">*</span></label>
            <input type="text" formControlName="response" class="form-control">

        </div>
          </div>
          <div class="row mt-3 ms-1">            
            <div class="col-4">
              <label class="form-label">Class Apply For <span class="error">*</span></label>
              <input type="number" formControlName="classApplyFor" class="form-control">

          </div>
          </div>
          <div class="text-end mb-3">
            <button class="btn">Save</button>
          </div>
          </form>
        </mat-tab>
      </mat-tab-group>
    </div>
  </div>
</app-layout>
<ng-template #template>
  <div class="modal-header">
    <h4 class="modal-title pull-left">Edit Enquiry</h4>
    <button type="button" class="btn-close close pull-right" aria-label="Close" (click)="closePopup()">
      <span aria-hidden="true" class="visually-hidden">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <form [formGroup]="editEnq">
      <div class="modal-body bg-white">
        <div class="mb-3">
          <label class="form-label">Name</label>
          <input type="text" class="form-control" formControlName="name">
        </div>
        <div class="mb-3">
          <label class="form-label">Gender</label>
          <input type="text" class="form-control" formControlName="gender">
        </div>
         <div class="mb-3">
          <label class="form-label">Date of Birth</label>
          <input type="text" class="date-picker-input" formControlName="dob" 
          [matDatepicker]="picker2"  (click)="picker2.open()"> 
        </div>
        <mat-datepicker #picker2></mat-datepicker>
         <div class="mb-3">
          <label class="form-label">FatherName</label>
          <input type="text" class="form-control" formControlName="fatherName">
        </div>
         <div class="mb-3">
          <label class="form-label">MotherName</label>
          <input type="text" class="form-control" formControlName="motherName">
        </div>
         <div class="mb-3">
          <label class="form-label">Mobile No</label>
          <input type="text" class="form-control" formControlName="mobileNo">
        </div>
         <div class="mb-3">
          <label class="form-label">Email</label>
          <input type="text" class="form-control" formControlName="email">
        </div> 
        <div class="mb-3">
          <label class="form-label">Assigned</label>
          <input type="text" class="form-control" formControlName="assigned">
        </div>
      <div class="mb-3">
        <label class="form-label">Class Apply For</label>
        <input type="text" class="form-control" formControlName="classApplyFor">
      </div>
       
      </div>
      <div class="modal-footer">        
        <button type="button" class="save_button btn" (click)="updateEnq()">Update</button>
        <button type="button" class="save_button btn" (click)="closePopup()">Cancel</button>
      </div>
    </form>
  </div>
</ng-template>
<ng-template #deletemplate>
  <div class="modal-header">
    <h4 class="modal-title pull-left">Delete Enquiry</h4>
    <button type="button" class="btn-close close pull-right" aria-label="Close" (click)="closePopup()">
      <span aria-hidden="true" class="visually-hidden">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <div class="row">
      <div class="col-md-12">
        <span class="text-justify">Are you sure you want to delete this Qnquiry?</span>
      </div>
    </div>
       
      <div class="modal-footer mt-4">
        <button type="button" class="save_button btn" (click)="delete()">Yes, Continue</button>
        <button type="button" class="save_button btn" (click)="closePopup()">Cancel</button>
      </div>
  </div>
</ng-template>