<form [formGroup]="studentForm">
  <div class="row">
    <div class="col-md-12 header-txt">
      <span>Academic Details</span>
    </div>
  </div>
  <div class="row mt-2 mb-3">
    <div class="col-3">
      <label class="form-label">Class <span class="error">*</span></label>
      <select
        class="form-select"
        formControlName="studentClass"
        (change)="onChangeClass($event)"
      >
        <option disabled value="select">Select</option>
        <option *ngFor="let sec of classes" value="{{ sec._id }}">
          {{ sec.className }}
        </option>
      </select>
    </div>
    <div class="col-3">
      <label class="form-label">Section <span class="error">*</span></label>
      <select class="form-select" formControlName="section">
        <option disabled value="select">Select</option>
        <option *ngFor="let sec of sections" value="{{ sec._id }}">
          {{ sec.name }}
        </option>
      </select>
    </div>
    <div class="col-3">
      <label class="form-label">Year <span class="error">*</span></label>
      <select class="form-select" formControlName="academicYear">
        <option disabled value="select">Select</option>
        <option *ngFor="let day of aceYear" value="{{ day._id }}">
          {{ day.name }}
        </option>
      </select>
    </div>
    <div class="col-3">
      <label class="form-label">Category <span class="error">*</span></label>
      <select class="form-select" formControlName="category">
        <option disabled value="select">Select</option>
        <option *ngFor="let day of categoryData" value="{{ day._id }}">
          {{ day.categoryName }}
        </option>
      </select>
    </div>
  </div>
  <div class="row mt-3 mb-3">
    <div class="col-3">
      <label class="form-label">Register No <span class="error">*</span></label>
      <input type="text" class="form-control" formControlName="registerNo" />
    </div>
    <div class="col-3">
      <label class="form-label">Roll No <span class="error">*</span></label>
      <input type="text" class="form-control" formControlName="rollNo" />
    </div>
    <div class="col-3">
      <label class="form-label"
        >Admission Date <span class="error">*</span></label
      >
      <div class="input-group">
        <input
          matInput
          class="form-control me-3"
          [matDatepicker]="picker"
          placeholder="dd-mm-yyyy"
          formControlName="admissionDate"
        />
        <div class="mr-2 tooglePicker">
          <mat-datepicker-toggle
            matSuffix
            [for]="picker"
          ></mat-datepicker-toggle>
        </div>
        <mat-datepicker #picker></mat-datepicker>
      </div>
    </div>
    <div class="col-3">
      <label class="form-label">Type <span class="error">*</span></label>
      <select class="form-select" formControlName="type">
        <option disabled value="select">Select</option>
        <option *ngFor="let tdata of typeList" value="{{ tdata._id }}">
          {{ tdata.name }}
        </option>
      </select>
    </div>
  </div>
  <div class="row">
    <div class="col-md-12 header-txt">
      <span>Student Details</span>
    </div>
  </div>
  <div class="row mt-3 mb-3">
    <div class="col-3">
      <label class="form-label">First Name <span class="error">*</span></label>
      <input type="text" class="form-control" formControlName="firstName" />
    </div>
    <div class="col-3">
      <label class="form-label">Last Name <span class="error">*</span></label>
      <input type="text" class="form-control" formControlName="lastName" />
    </div>
    <div class="col-3">
      <label class="form-label">Gender <span class="error">*</span></label>
      <select class="form-select" formControlName="gender">
        <option disabled value="select">Select</option>
        <option *ngFor="let genderD of genderList" value="{{ genderD._id }}">
          {{ genderD.name }}
        </option>
      </select>
    </div>
    <div class="col-3">
      <label class="form-label"
        >Date Of Birth <span class="error">*</span></label
      >
      <div class="input-group">
        <input
          matInput
          class="form-control me-3"
          [matDatepicker]="picker2"
          placeholder="mm/dd/yyyy"
          formControlName="dob"
        />
        <div class="mr-2 tooglePicker">
          <mat-datepicker-toggle
            matSuffix
            [for]="picker2"
          ></mat-datepicker-toggle>
        </div>
        <mat-datepicker #picker2></mat-datepicker>
      </div>
    </div>
  </div>
  <div class="row mt-3 mb-3">
    <div class="col-3">
      <label class="form-label">Blood group <span class="error">*</span></label>
      <select class="form-select" formControlName="bloodGroup">
        <option disabled value="select">Select</option>
        <option *ngFor="let day of bloodGrList" value="{{ day._id }}">
          {{ day.name }}
        </option>
      </select>
    </div>
    <div class="col-3">
      <label class="form-label"
        >Mother Tongue <span class="error">*</span></label
      >
      <select class="form-select" formControlName="motherTongue">
        <option disabled value="select">Select</option>
        <option *ngFor="let day of motherToungLanList" value="{{ day._id }}">
          {{ day.name }}
        </option>
      </select>
    </div>
    <div class="col-3">
      <label class="form-label">Religion <span class="error">*</span></label>
      <select class="form-select" formControlName="religion">
        <option disabled value="select">Select</option>
        <option *ngFor="let day of religionList" value="{{ day._id }}">
          {{ day.name }}
        </option>
      </select>
    </div>
    <div class="col-3">
      <label class="form-label">Caste <span class="error">*</span></label>
      <select class="form-select" formControlName="caste">
        <option disabled value="select">Select</option>
        <option *ngFor="let day of castList" value="{{ day._id }}">
          {{ day.name }}
        </option>
      </select>
    </div>
  </div>
  <div class="row mt-3 mb-3">
    <div class="col-3">
      <label class="form-label">Mobile No <span class="error">*</span></label>
      <input type="text" class="form-control" formControlName="mobileNumber" />
    </div>
    <div class="col-3">
      <label class="form-label">Email <span class="error">*</span></label>
      <input type="text" class="form-control" formControlName="email" />
    </div>
    <div class="col-3">
      <label class="form-label">City <span class="error">*</span></label>
      <input type="text" class="form-control" formControlName="city" />
    </div>
    <div class="col-3">
      <label class="form-label">State <span class="error">*</span></label>
      <input type="text" class="form-control" formControlName="state" />
    </div>
  </div>
  <div class="row">
    <div class="col-md-12 header-txt" >
        <span>Address Detail</span>
    </div>
</div>
  <div class="row">
    <div class="col-md-12 mt-3" >
        <h6>Present Address</h6>
    </div>
</div>
  <div class="row mt-2 mb-3 mt-3">
    <div class="col-4">
      <label class="form-label">House No <span class="error">*</span></label>
      <input type="text" class="form-control"  formControlName="presentAddressHouseNo" > 
      <div *ngIf="studentForm.controls['presentAddressHouseNo'].invalid && (studentForm.controls['presentAddressHouseNo'].dirty || studentForm.controls['presentAddressHouseNo'].touched)"
          class="error mt-2">
          <div *ngIf="studentForm.controls['presentAddressHouseNo'].errors['required']">
            House No is required
          </div>
      </div> 
    </div>
    <div class="col-5">
      <label class="form-label">Apartment Name / Street <span class="error">*</span></label>
      <input type="text" class="form-control"  formControlName="presentAddressStreet" >  
      <div *ngIf="studentForm.controls['presentAddressStreet'].invalid && (studentForm.controls['presentAddressStreet'].dirty || studentForm.controls['presentAddressStreet'].touched)"
      class="error mt-2">
      <div *ngIf="studentForm.controls['presentAddressStreet'].errors['required']">
       Apartment Name / Street is required
      </div>
  </div> 
    </div>
    <div class="col-3">
      <label class="form-label">ZipCode <span class="error">*</span></label>
      <input type="text" class="form-control"  formControlName="presentAddressZipCode" >  
      <div *ngIf="studentForm.controls['presentAddressZipCode'].invalid && (studentForm.controls['presentAddressZipCode'].dirty || studentForm.controls['presentAddressZipCode'].touched)"
      class="error mt-2">
      <div *ngIf="studentForm.controls['presentAddressZipCode'].errors['required']">
        ZipCode is required
      </div>
  </div> 
    </div>
  </div>    
  <div class="row mt-2 mb-3 mt-3">
    <div class="col-4">
      <label class="form-label">City <span class="error">*</span></label>
      <input type="text" class="form-control"  formControlName="presentAddressCity" > 
      <div *ngIf="studentForm.controls['presentAddressCity'].invalid && (studentForm.controls['presentAddressCity'].dirty || studentForm.controls['presentAddressCity'].touched)"
      class="error mt-2">
      <div *ngIf="studentForm.controls['presentAddressCity'].errors['required']">
        City is required
      </div>
  </div>  
    </div>
    <div class="col-5">
      <label class="form-label">State <span class="error">*</span></label>
      <input type="text" class="form-control"  formControlName="presentAddressState" >  
      <div *ngIf="studentForm.controls['presentAddressState'].invalid && (studentForm.controls['presentAddressState'].dirty || studentForm.controls['presentAddressState'].touched)"
      class="error mt-2">
      <div *ngIf="studentForm.controls['presentAddressState'].errors['required']">
        State is required
      </div>
  </div> 
    </div>
    </div>
    <div class="row">
      <div class="col-md-12 mt-3" style="border-bottom:1px solid #ccc ;">
          <h6>Permanent Address</h6>
      </div>
  </div>
  <div class="row" >
    <div class="col-md-12" >
        <mat-checkbox (change)="getVAlue($event)" formControlName="isSameAddress"><b> Same As Present Address </b></mat-checkbox>
    </div>
  </div>

<div class="row mt-2 mb-3 mt-3">
  <div class="col-4">
    <label class="form-label">House No <span class="error">*</span></label>
    <input type="text" class="form-control"  formControlName="permanentAddressHouseNo" >  
    <div *ngIf="studentForm.controls['permanentAddressHouseNo'].invalid && (studentForm.controls['permanentAddressHouseNo'].dirty || studentForm.controls['permanentAddressHouseNo'].touched)"
    class="error mt-2">
    <div *ngIf="studentForm.controls['permanentAddressHouseNo'].errors['required']">
      House No is required
    </div>
</div> 
  </div>
  <div class="col-5">
    <label class="form-label">Apartment Name / Street <span class="error">*</span></label>
    <input type="text" class="form-control"  formControlName="permanentAddressStreet" >  
    <div *ngIf="studentForm.controls['permanentAddressStreet'].invalid && (studentForm.controls['permanentAddressStreet'].dirty || studentForm.controls['permanentAddressStreet'].touched)"
    class="error mt-2">
    <div *ngIf="studentForm.controls['permanentAddressStreet'].errors['required']">
      Apartment Name / Street is required
    </div>
</div> 
  </div>
  <div class="col-3">
    <label class="form-label">ZipCode <span class="error">*</span></label>
    <input type="text" class="form-control"  formControlName="permanentAddressZipCode" > 
    <div *ngIf="studentForm.controls['permanentAddressZipCode'].invalid && (studentForm.controls['permanentAddressZipCode'].dirty || studentForm.controls['permanentAddressZipCode'].touched)"
    class="error mt-2">
    <div *ngIf="studentForm.controls['permanentAddressZipCode'].errors['required']">
      ZipCode is required
    </div>
</div>  
  </div>
</div>    
<div class="row mt-2 mb-3 mt-3">
  <div class="col-4">
    <label class="form-label">City <span class="error">*</span></label>
    <input type="text" class="form-control"  formControlName="permanentAddressCity" > 
    <div *ngIf="studentForm.controls['permanentAddressCity'].invalid && (studentForm.controls['permanentAddressCity'].dirty || studentForm.controls['permanentAddressCity'].touched)"
    class="error mt-2">
    <div *ngIf="studentForm.controls['permanentAddressCity'].errors['required']">
      City is required
    </div>
</div>   
  </div>
  <div class="col-5">
    <label class="form-label">State <span class="error">*</span></label>
    <input type="text" class="form-control"  formControlName="permanentAddressState" > 
    <div *ngIf="studentForm.controls['permanentAddressState'].invalid && (studentForm.controls['permanentAddressState'].dirty || studentForm.controls['permanentAddressState'].touched)"
    class="error mt-2">
    <div *ngIf="studentForm.controls['permanentAddressState'].errors['required']">
      State is required
    </div>
</div> 
  </div>
  </div>

  <div class="row">
    <div class="col-md-12 header-txt">
      <span>Guardian Details</span>
    </div>
  </div>
  <ng-container formGroupName="guardian1">
    <!-- ===== BEGINS:: Guardina 1 ===== -->
    <div class="border-bottom py-2">
      <strong>Relation 1:</strong>
    </div>
    <div class="row mt-3 mb-3">
      <div class="col-4">
        <label class="form-label">Relation <span class="error">*</span></label>
        <select class="form-select" formControlName="relation">
          <option disabled value="select">Select</option>
          <option *ngFor="let sec of relationShipList" value="{{ sec._id }}">
            {{ sec.name }}
          </option>
        </select>
      </div>
    </div>
    <div class="row mt-3 mb-3">
      <div class="col-6">
        <label class="form-label">Full Name <span class="error">*</span></label>
        <input type="text" class="form-control" formControlName="fullName" />
      </div>
      <div class="col-4">
        <label class="form-label">Mobile No <span class="error">*</span></label>
        <input
          type="text"
          class="form-control"
          formControlName="mobileNumber"
        />
      </div>
    </div>
    <div class="row mt-3 mb-3">
      <div class="col-6">
        <label class="form-label">Email <span class="error">*</span></label>
        <input type="text" class="form-control" formControlName="email" />
      </div>
      <div class="col-4">
        <label class="form-label"
          >Occupation <span class="error">*</span></label
        >
        <select class="form-select" formControlName="occupation">
          <option disabled value="select">Select</option>
          <option *ngFor="let sec of occupationsList" value="{{ sec._id }}">
            {{ sec.name }}
          </option>
        </select>
      </div>
    </div>
  </ng-container>
    <!-- ===== ENDS:: Guardina 1 ===== -->

    <!-- ===== BEGINS:: Guardina 2 ===== -->
    <ng-container formGroupName="guardian2">
    <div class="border-bottom py-2">
      <strong>Relation 2:</strong>
    </div>
    <div class="row mt-3 mb-3">
      <div class="col-4">
        <label class="form-label">Relation <span class="error">*</span></label>
        <select class="form-select" formControlName="relation">
          <option disabled value="select">Select</option>
          <option *ngFor="let sec of relationShipList" value="{{ sec._id }}">
            {{ sec.name }}
          </option>
        </select>
      </div>
    </div>
    <div class="row mt-3 mb-3">
      <div class="col-6">
        <label class="form-label">Full Name <span class="error">*</span></label>
        <input type="text" class="form-control" formControlName="fullName" />
      </div>
      <div class="col-4">
        <label class="form-label">Mobile No <span class="error">*</span></label>
        <input
          type="text"
          class="form-control"
          formControlName="mobileNumber"
        />
      </div>
    </div>
    <div class="row mt-3 mb-3">
      <div class="col-6">
        <label class="form-label">Email <span class="error">*</span></label>
        <input type="text" class="form-control" formControlName="email" />
      </div>
      <div class="col-4">
        <label class="form-label"
          >Occupation <span class="error">*</span></label
        >
        <select class="form-select" formControlName="occupation">
          <option disabled value="select">Select</option>
          <option *ngFor="let sec of occupationsList" value="{{ sec._id }}">
            {{ sec.name }}
          </option>
        </select>
      </div>
    </div>
    <!-- ===== ENDS:: Guardina 2 ===== -->
  </ng-container>
  <div class="row">
    <div class="col-md-12 header-txt">
      <span>Previous School Details</span>
    </div>
  </div>
  <div class="row mt-3 mb-3">
    <div class="col-6">
      <label class="form-label">School Name </label>
      <input
        type="text"
        class="form-control"
        rows="3"
        formControlName="previousSchoolName"
      />
    </div>
    <div class="col-6">
      <label class="form-label">Qualification </label>
      <input
        type="text"
        class="form-control"
        rows="3"
        formControlName="previousQualification"
      />
    </div>
  </div>
  <div class="row mt-3 mb-3">
    <div class="col-12">
      <label class="form-label">Remarks </label>
      <textarea
        type="text"
        class="form-control"
        rows="3"
        formControlName="previousRemarks"
      >
      </textarea>
    </div>
  </div>
  <div class="row">
    <div class="col-md-12 header-txt">
      <span>Login Details</span>
    </div>
  </div>
  <div class="row mt-3 mb-3">
    <div class="col-4">
      <label class="form-label"
        >Username <span class="error">*</span></label
      >
      <input
        type="text"
        class="form-control"
        formControlName="userName"
      />
    </div>
    <div class="col-4">
      <label class="form-label"
        >Password <span class="error">*</span></label
      >
      <input
        type="text"
        class="form-control"
        formControlName="password"
      />
    </div>
  </div>
  <div class="header-txt col-md-12"></div>
  <div class="row mt-3 mb-3">
    <div class="col-md-10"></div>
    <div class="col-md-2">
      <button
        type="button"
        class="save_button btn"
        (click)="updateInfo(studentForm)"
        [disabled]="!studentForm.valid"
      >
        Save
      </button>
    </div>
  </div>
</form>
